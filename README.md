# 视频合成软件 - 自动分割合成版

一个功能强大的视频处理工具，支持视频分割、合成和全新的自动化流水线处理。

## ✨ 主要功能

### 🔄 自动分割-合成模式（全新功能）
- **一键式处理**：自动完成分割→合成的完整流水线
- **智能文件夹映射**：分割输出自动成为合成输入
- **严格顺序执行**：确保分割100%完成后才开始合成
- **实时进度监控**：两阶段进度显示和详细日志
- **灵活参数配置**：支持分割时长、合成数量等自定义设置

### 📹 视频合成模式
- 批量文件夹处理
- 智能素材选择
- 可配置输出参数
- GPU硬件加速支持

### ✂️ 视频分割模式
- 随机时长分割
- 保留元数据选项
- 批量处理支持
- 质量可调节

## 🚀 快速开始

### 方法1：使用启动脚本（推荐）
```bash
# Windows用户
双击运行 start.bat

# 或者在命令行中
start.bat
```

### 方法2：手动启动
```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 运行程序
python main.py
```

## 📋 系统要求

- **操作系统**：Windows 10/11, macOS 10.14+, Linux
- **Python版本**：3.8 或更高版本
- **内存**：建议 4GB 以上
- **存储空间**：建议 1GB 以上可用空间
- **显卡**：支持GPU加速（可选）

## 🛠️ 依赖项

主要依赖包：
- `PyQt5` - 图形界面框架
- `opencv-python` - 视频处理
- `numpy` - 数值计算
- `imageio-ffmpeg` - FFmpeg集成
- `Pillow` - 图像处理
- `psutil` - 系统监控

## 📖 使用指南

### 自动模式使用流程

1. **打开程序**：运行 `start.bat` 或 `python main.py`
2. **选择标签页**：切换到"🔄 自动模式"标签页
3. **添加文件夹**：
   - 点击"添加文件夹"或直接拖拽文件夹到列表中
   - 支持多个文件夹批量处理
4. **配置输出路径**：
   - 设置分割输出文件夹
   - 设置最终合成输出文件夹
5. **调整参数**：
   - 分割时长范围（默认2-4秒）
   - 每视频片段数（默认3个）
   - 输出视频数量（默认5个）
   - 其他质量和分辨率设置
6. **开始处理**：点击"🚀 开始自动处理"
7. **监控进度**：观看实时进度和日志输出
8. **处理完成**：系统会自动通知处理结果

### 处理流程说明

```
输入文件夹 → 分割阶段(50%) → 合成阶段(50%) → 最终输出
    ↓              ↓              ↓
  原视频文件    分割片段文件    合成新视频
```

## 🔧 高级配置

### GPU加速配置
- 确保安装了支持CUDA的显卡驱动
- 程序会自动检测并启用GPU加速
- 可在"高级设置"中手动开启/关闭

### 输出质量设置
- **快速**：处理速度快，文件较大
- **中等质量**：平衡质量和速度（推荐）
- **高质量**：最佳质量，处理时间较长

## 🐛 故障排除

### 常见问题

**Q: 程序无法启动**
- 检查Python版本是否3.8+
- 运行 `pip install -r requirements.txt` 安装依赖

**Q: 处理速度慢**
- 启用GPU加速
- 降低输出质量设置
- 减少并发处理数量

**Q: 内存不足**
- 减少批处理文件夹数量
- 降低输出分辨率
- 关闭其他占用内存的程序

**Q: 自动模式卡在分割阶段**
- 检查输入文件夹是否包含有效视频文件
- 确保输出文件夹有足够的磁盘空间
- 查看日志获取详细错误信息

## 📝 版本历史

### v2.2.0 (当前版本)
- ✨ 新增自动分割-合成模式
- 🔧 改进批处理性能
- 🐛 修复多个稳定性问题
- 📊 增强进度显示和日志系统

### v2.1.1
- 🔧 优化视频处理算法
- 🐛 修复GPU检测问题

### v2.1.0
- ✨ 添加批量处理功能
- 🔧 改进用户界面

## 🤝 贡献

欢迎提交Issue和Pull Request！

## 📄 许可证

本项目采用MIT许可证 - 详见LICENSE文件

## 🆘 支持

如果遇到问题，请：
1. 查看本README的故障排除部分
2. 检查 `video_merger.log` 日志文件
3. 在GitHub上提交Issue

---

**享受视频处理的乐趣！** 🎬✨
